<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prompt & Caption Generator</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ú®</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #ec4899;
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --bg-card-hover: #252542;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --border-color: rgba(255, 255, 255, 0.1);
            --success: #10b981;
            --warning: #f59e0b;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
            animation: bgMove 20s ease-in-out infinite;
        }

        @keyframes bgMove {

            0%,
            100% {
                transform: translate(0, 0);
            }

            50% {
                transform: translate(-5%, -5%);
            }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 100px;
        }

        header {
            text-align: center;
            padding: 30px 0;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        h1 {
            font-size: 1.6rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 8px;
        }

        /* Main Tabs */
        .main-tabs {
            display: flex;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 6px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
        }

        .main-tab {
            flex: 1;
            padding: 14px 20px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .main-tab:hover {
            color: var(--text-primary);
        }

        .main-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .main-tab .material-icons-round {
            font-size: 20px;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Upload Area */
        .upload-section {
            margin-bottom: 24px;
        }

        .upload-area {
            background: var(--bg-card);
            border: 2px dashed var(--border-color);
            border-radius: 20px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: var(--bg-card-hover);
            transform: translateY(-2px);
        }

        .upload-area.dragover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .upload-area.has-image {
            padding: 20px;
        }

        .upload-icon {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 16px;
        }

        .upload-text h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .upload-text p {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        #fileInput {
            display: none;
        }

        .preview-container {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }

        .preview-container.show {
            display: flex;
        }

        .preview-image {
            max-width: 100%;
            max-height: 250px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .image-info {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .info-badge {
            background: rgba(99, 102, 241, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            color: var(--primary-light);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-badge .material-icons-round {
            font-size: 14px;
        }

        .change-image-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 8px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .change-image-btn:hover {
            border-color: var(--primary);
            color: var(--primary-light);
        }

        /* Options */
        .options-section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .option-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .option-btn:hover {
            background: var(--bg-card-hover);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .option-btn.active {
            background: rgba(99, 102, 241, 0.15);
            border-color: var(--primary);
        }

        .option-btn .icon {
            font-size: 22px;
            margin-bottom: 6px;
        }

        .option-btn h4 {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .option-btn p {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .style-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .style-chip {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 8px 14px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .style-chip:hover {
            border-color: var(--primary);
        }

        .style-chip.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
            color: white;
        }

        /* Caption Options */
        .caption-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .caption-option {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 14px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .caption-option:hover {
            background: var(--bg-card-hover);
            border-color: var(--primary);
        }

        .caption-option.active {
            background: rgba(99, 102, 241, 0.15);
            border-color: var(--primary);
        }

        .caption-option .emoji {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .caption-option h4 {
            font-size: 0.85rem;
            font-weight: 600;
        }

        /* Generate Button */
        .generate-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            padding: 16px;
            border-radius: 14px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
        }

        .generate-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .generate-btn:hover::before {
            left: 100%;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .generate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Results */
        .results-section {
            display: none;
        }

        .results-section.show {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .prompt-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            position: relative;
        }

        .prompt-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .prompt-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .copy-btn {
            background: rgba(99, 102, 241, 0.2);
            border: none;
            padding: 8px 14px;
            border-radius: 8px;
            cursor: pointer;
            color: var(--primary-light);
            font-size: 0.75rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .copy-btn:hover {
            background: var(--primary);
            color: white;
        }

        .copy-btn.copied {
            background: var(--success);
            color: white;
        }

        .prompt-text {
            font-size: 0.9rem;
            line-height: 1.7;
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.2);
            padding: 14px;
            border-radius: 10px;
            border-left: 3px solid var(--primary);
        }

        /* Caption specific styles */
        .caption-text {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.2);
            padding: 16px;
            border-radius: 10px;
            border-left: 3px solid var(--secondary);
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border-color);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        footer {
            text-align: center;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        footer a {
            color: var(--primary-light);
            text-decoration: none;
        }

        @media (max-width: 480px) {

            .options-grid,
            .caption-options {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.4rem;
            }

            .main-tab {
                padding: 12px 16px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>

<body>
    <div class="bg-animation"></div>

    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">‚ú®</div>
            </div>
            <h1>AI Prompt & Caption</h1>
            <p class="subtitle">T·ª± ƒë·ªông sinh prompt n√¢ng c·∫•p ·∫£nh & caption Vi·ªát Nam</p>
        </header>

        <!-- Main Tabs -->
        <div class="main-tabs">
            <button class="main-tab active" data-tab="prompt">
                <span class="material-icons-round">auto_awesome</span>
                Prompt AI
            </button>
            <button class="main-tab" data-tab="caption">
                <span class="material-icons-round">edit_note</span>
                Caption VN
            </button>
        </div>

        <!-- Upload Section (shared) -->
        <section class="upload-section">
            <div class="upload-area" id="uploadArea">
                <div class="upload-content" id="uploadContent">
                    <span class="material-icons-round upload-icon">cloud_upload</span>
                    <div class="upload-text">
                        <h3>T·∫£i ·∫£nh l√™n</h3>
                        <p>K√©o th·∫£ ho·∫∑c nh·∫•n ƒë·ªÉ ch·ªçn ·∫£nh</p>
                    </div>
                </div>
                <div class="preview-container" id="previewContainer">
                    <img id="previewImage" class="preview-image" alt="Preview">
                    <div class="image-info" id="imageInfo"></div>
                    <button class="change-image-btn" id="changeImageBtn">
                        <span class="material-icons-round">refresh</span>
                        ƒê·ªïi ·∫£nh
                    </button>
                </div>
                <input type="file" id="fileInput" accept="image/*">
            </div>
        </section>

        <!-- Tab 1: Prompt Content -->
        <div class="tab-content active" id="promptTab">
            <section class="options-section">
                <h3 class="section-title">
                    <span class="material-icons-round">auto_fix_high</span>
                    Ki·ªÉu n√¢ng c·∫•p
                </h3>
                <div class="options-grid">
                    <button class="option-btn active" data-type="enhance">
                        <div class="icon">üé®</div>
                        <h4>N√¢ng c·∫•p t·ªïng th·ªÉ</h4>
                        <p>TƒÉng ch·∫•t l∆∞·ª£ng to√†n di·ªán</p>
                    </button>
                    <button class="option-btn" data-type="upscale">
                        <div class="icon">üìê</div>
                        <h4>TƒÉng ƒë·ªô ph√¢n gi·∫£i</h4>
                        <p>Upscale & l√†m s·∫Øc n√©t</p>
                    </button>
                    <button class="option-btn" data-type="restore">
                        <div class="icon">üîÑ</div>
                        <h4>Ph·ª•c h·ªìi ·∫£nh</h4>
                        <p>S·ª≠a ·∫£nh c≈©, h·ªèng</p>
                    </button>
                    <button class="option-btn" data-type="relight">
                        <div class="icon">üí°</div>
                        <h4>T·ªëi ∆∞u √°nh s√°ng</h4>
                        <p>C√¢n b·∫±ng s√°ng & m√†u</p>
                    </button>
                </div>
            </section>

            <section class="options-section">
                <h3 class="section-title">
                    <span class="material-icons-round">palette</span>
                    Phong c√°ch
                </h3>
                <div class="style-chips">
                    <button class="style-chip active" data-style="realistic">Ch√¢n th·ª±c</button>
                    <button class="style-chip" data-style="cinematic">Cinematic</button>
                    <button class="style-chip" data-style="vibrant">R·ª±c r·ª°</button>
                    <button class="style-chip" data-style="soft">Nh·∫π nh√†ng</button>
                    <button class="style-chip" data-style="hdr">HDR</button>
                    <button class="style-chip" data-style="vintage">Vintage</button>
                </div>
            </section>

            <button class="generate-btn" id="generatePromptBtn" disabled>
                <span class="material-icons-round">auto_awesome</span>
                T·∫°o Prompt
            </button>

            <div class="loading" id="promptLoading">
                <div class="spinner"></div>
                <p>ƒêang ph√¢n t√≠ch ·∫£nh...</p>
            </div>

            <section class="results-section" id="promptResults">
                <h3 class="section-title">
                    <span class="material-icons-round">description</span>
                    Prompt ƒë∆∞·ª£c t·∫°o
                </h3>
                <div id="promptCards"></div>
            </section>
        </div>

        <!-- Tab 2: Caption Content -->
        <div class="tab-content" id="captionTab">
            <section class="options-section">
                <h3 class="section-title">
                    <span class="material-icons-round">mood</span>
                    Ch·ªß ƒë·ªÅ caption
                </h3>
                <div class="caption-options">
                    <button class="caption-option active" data-mood="daily">
                        <div class="emoji">‚òÄÔ∏è</div>
                        <h4>H√†ng ng√†y</h4>
                    </button>
                    <button class="caption-option" data-mood="travel">
                        <div class="emoji">‚úàÔ∏è</div>
                        <h4>Du l·ªãch</h4>
                    </button>
                    <button class="caption-option" data-mood="food">
                        <div class="emoji">üçú</div>
                        <h4>·∫®m th·ª±c</h4>
                    </button>
                    <button class="caption-option" data-mood="love">
                        <div class="emoji">üíï</div>
                        <h4>T√¨nh y√™u</h4>
                    </button>
                    <button class="caption-option" data-mood="motivation">
                        <div class="emoji">üí™</div>
                        <h4>ƒê·ªông l·ª±c</h4>
                    </button>
                    <button class="caption-option" data-mood="funny">
                        <div class="emoji">üòÇ</div>
                        <h4>H√†i h∆∞·ªõc</h4>
                    </button>
                    <button class="caption-option" data-mood="aesthetic">
                        <div class="emoji">üå∏</div>
                        <h4>Aesthetic</h4>
                    </button>
                    <button class="caption-option" data-mood="deep">
                        <div class="emoji">üåô</div>
                        <h4>S√¢u l·∫Øng</h4>
                    </button>
                </div>
            </section>

            <section class="options-section">
                <h3 class="section-title">
                    <span class="material-icons-round">format_quote</span>
                    Phong c√°ch vi·∫øt
                </h3>
                <div class="style-chips">
                    <button class="style-chip caption-style active" data-capstyle="cute">D·ªÖ th∆∞∆°ng ü•∞</button>
                    <button class="style-chip caption-style" data-capstyle="cool">Cool ng·∫ßu üòé</button>
                    <button class="style-chip caption-style" data-capstyle="poetic">Th∆° m·ªông üåø</button>
                    <button class="style-chip caption-style" data-capstyle="gen-z">Gen Z üî•</button>
                </div>
            </section>

            <button class="generate-btn" id="generateCaptionBtn" disabled>
                <span class="material-icons-round">edit_note</span>
                T·∫°o Caption
            </button>

            <div class="loading" id="captionLoading">
                <div class="spinner"></div>
                <p>ƒêang t·∫°o caption...</p>
            </div>

            <section class="results-section" id="captionResults">
                <h3 class="section-title">
                    <span class="material-icons-round">format_quote</span>
                    Caption cho b·∫°n
                </h3>
                <div id="captionCards"></div>
            </section>
        </div>

        <footer>
            Made with ‚ù§Ô∏è by <a href="https://github.com/Chumvn" target="_blank">Chum</a>
        </footer>
    </div>

    <script>
        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const uploadContent = document.getElementById('uploadContent');
        const previewContainer = document.getElementById('previewContainer');
        const previewImage = document.getElementById('previewImage');
        const imageInfo = document.getElementById('imageInfo');
        const changeImageBtn = document.getElementById('changeImageBtn');

        // Tabs
        const mainTabs = document.querySelectorAll('.main-tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Prompt elements
        const generatePromptBtn = document.getElementById('generatePromptBtn');
        const promptLoading = document.getElementById('promptLoading');
        const promptResults = document.getElementById('promptResults');
        const promptCards = document.getElementById('promptCards');
        const optionBtns = document.querySelectorAll('.option-btn');
        const styleChips = document.querySelectorAll('.style-chip:not(.caption-style)');

        // Caption elements
        const generateCaptionBtn = document.getElementById('generateCaptionBtn');
        const captionLoading = document.getElementById('captionLoading');
        const captionResults = document.getElementById('captionResults');
        const captionCards = document.getElementById('captionCards');
        const captionOptions = document.querySelectorAll('.caption-option');
        const captionStyles = document.querySelectorAll('.caption-style');

        let currentImage = null;
        let selectedType = 'enhance';
        let selectedStyle = 'realistic';
        let selectedMood = 'daily';
        let selectedCapStyle = 'cute';

        // Tab switching
        mainTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                mainTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                tabContents.forEach(content => content.classList.remove('active'));
                document.getElementById(tab.dataset.tab + 'Tab').classList.add('active');
            });
        });

        // Prompt Templates
        const promptTemplates = {
            enhance: {
                main: (style, analysis) => `Enhance this ${analysis.type} image with ${style} aesthetics. Improve overall quality, sharpen details, enhance colors and contrast. Maintain natural look while boosting visual appeal. Resolution: ${analysis.width}x${analysis.height}, preserve original composition. Apply professional-grade enhancement.`,
                midjourney: (style, analysis) => `${analysis.description} --enhance --quality 2 --style ${style} --ar ${analysis.aspect} --v 6`,
                dalle: (style, analysis) => `Enhance this image with ${style} style. Improve sharpness, color vibrancy, and overall quality while maintaining the original subject and composition. Professional photo enhancement.`,
                stable: (style, analysis) => `masterpiece, best quality, highly detailed, ${style} style, enhanced, improved lighting, sharper details, vibrant colors, professional photography, 8k uhd`
            },
            upscale: {
                main: (style, analysis) => `Upscale this ${analysis.width}x${analysis.height} image to 4K/8K resolution. Apply intelligent super-resolution maintaining ${style} quality. Enhance fine details, reduce noise, sharpen edges without artifacts.`,
                midjourney: (style, analysis) => `${analysis.description} --upscale 4x --quality 2 --style ${style} --ar ${analysis.aspect} --v 6`,
                dalle: (style, analysis) => `Upscale and enhance this image to higher resolution with ${style} aesthetics. Increase detail and sharpness. Remove any noise or compression artifacts.`,
                stable: (style, analysis) => `(masterpiece:1.2), (best quality:1.2), (highres:1.2), ${style} style, ultra detailed, sharp focus, noise-free, upscaled, 8k resolution`
            },
            restore: {
                main: (style, analysis) => `Restore and repair this ${analysis.type} image. Fix damage, scratches, color fading, and noise. Reconstruct missing details using AI. Apply ${style} enhancement after restoration.`,
                midjourney: (style, analysis) => `${analysis.description}, restored, repaired, vintage photo restoration --quality 2 --style ${style} --ar ${analysis.aspect} --v 6`,
                dalle: (style, analysis) => `Restore this damaged/old image. Remove scratches, fix color fading, repair torn areas, reduce noise. Apply ${style} enhancement.`,
                stable: (style, analysis) => `(restored:1.3), (repaired:1.2), best quality, ${style} style, removed scratches, fixed colors, clear details, professional restoration`
            },
            relight: {
                main: (style, analysis) => `Relight this ${analysis.type} image with ${style} lighting. Optimize exposure, balance shadows and highlights. Apply professional color grading. Fix underexposed/overexposed areas.`,
                midjourney: (style, analysis) => `${analysis.description}, professional lighting, ${style} mood --quality 2 --lighting dramatic --ar ${analysis.aspect} --v 6`,
                dalle: (style, analysis) => `Relight this image with improved lighting. Apply ${style} lighting style. Balance exposure, enhance shadows and highlights, add professional color grading.`,
                stable: (style, analysis) => `(professional lighting:1.3), ${style} style, balanced exposure, enhanced shadows, beautiful highlights, color graded, cinematic lighting`
            }
        };

        const styleDescriptions = {
            realistic: 'natural, photorealistic, true-to-life',
            cinematic: 'cinematic, movie-like, dramatic',
            vibrant: 'vibrant, colorful, saturated',
            soft: 'soft, gentle, pastel',
            hdr: 'HDR, high dynamic range, detailed',
            vintage: 'vintage, retro, film-like'
        };

        // Vietnamese Caption Templates
        const captionTemplates = {
            daily: {
                cute: [
                    "‚ú® M·ªôt ng√†y m·ªõi, m·ªôt ni·ªÅm vui m·ªõi n√®! üå∏",
                    "‚òÄÔ∏è H√¥m nay tr·ªùi ƒë·∫πp qu√°, l√≤ng c≈©ng ƒë·∫πp theo üíï",
                    "üåà Cu·ªôc s·ªëng ƒë∆°n gi·∫£n th√¥i m√† sao th·∫•y vui gh√™ ü•∞",
                    "üí´ C·ª© c∆∞·ªùi th√¥i, m·ªçi th·ª© r·ªìi s·∫Ω ·ªïn th√¥i m√† üòä",
                    "üçÄ May m·∫Øn l√† ƒë∆∞·ª£c th·ª©c d·∫≠y m·ªói ng√†y ƒë·ªÉ y√™u ƒë·ªùi üíñ"
                ],
                cool: [
                    "üòé S·ªëng nh∆∞ m√¨nh mu·ªën, kh√¥ng c·∫ßn gi·∫£i th√≠ch üî•",
                    "üí™ Ng√†y m·ªõi - Th·ª≠ th√°ch m·ªõi - Chi·∫øn th·∫Øng m·ªõi üèÜ",
                    "‚ö° Kh√¥ng c√≥ g√¨ l√† kh√¥ng th·ªÉ, ch·ªâ c√≥ ch∆∞a l√†m th√¥i üíØ",
                    "üñ§ ƒê·∫πp trai/g√°i th√¨ kh√¥ng c·∫ßn filter üòè",
                    "üî• Chill th√¥i, ƒë·ªùi c√≥ bao l√¢u ƒë√¢u m√† lo ü§ô"
                ],
                poetic: [
                    "üåø Ng√†y qua ng√†y, l·∫∑ng l·∫Ω tr√¥i nh∆∞ d√≤ng n∆∞·ªõc trong xanh üçÉ",
                    "üå∏ M·ªói kho·∫£nh kh·∫Øc ƒë·ªÅu l√† m√≥n qu√† t·ª´ cu·ªôc s·ªëng üí´",
                    "‚òÅÔ∏è ƒê·ªÉ gi√≥ cu·ªën ƒëi nh·ªØng mu·ªôn phi·ªÅn, ch·ªâ gi·ªØ l·∫°i n·ª• c∆∞·ªùi üåô",
                    "üå∑ S·ªëng ch·∫≠m l·∫°i ƒë·ªÉ c·∫£m nh·∫≠n nh·ªØng ƒëi·ªÅu nh·ªè b√© nh∆∞ng √Ω nghƒ©a ü¶ã",
                    "‚ú® H√£y ƒë·ªÉ tr√°i tim d·∫´n l·ªëi, v√† t√¢m h·ªìn ƒë∆∞·ª£c t·ª± do üåª"
                ],
                "gen-z": [
                    "üíÖ Slay c·∫£ ng√†y kh√¥ng ngh·ªâ bestie ∆°i üî•",
                    "üò≠üíÖ Vibe check: ƒëang ·ªïn l·∫Øm nha 100 ƒëi·ªÉm üíØ",
                    "ü´∂ Real qu√° real lu√¥n, kh√¥ng cap ƒë√¢u üó£Ô∏è",
                    "üíÄ I ·ªët ƒë√¢y, ƒë·ª´ng t√¨m (ch·ª© tag th√¨ v·∫´n rep) ‚úåÔ∏è",
                    "ü§° ƒê·ªô v·ªõi ƒë·ªùi ch√∫t, c√≥ sao ƒë√¢u üòå‚ú®"
                ]
            },
            travel: {
                cute: [
                    "‚úàÔ∏è ƒêi ƒë√¢u c≈©ng ƒë∆∞·ª£c, mi·ªÖn l√† b√™n c·∫°nh b·∫°n n√® üíï",
                    "üèñÔ∏è Bi·ªÉn xanh, c√°t tr·∫Øng, n·∫Øng v√†ng v√† em ƒë√¢y üå¥",
                    "üó∫Ô∏è Th·∫ø gi·ªõi r·ªông l·ªõn, m√¨nh c·ª© ƒëi r·ªìi s·∫Ω t√¨m th·∫•y m√¨nh üå∏",
                    "üéí X√°ch ba l√¥ l√™n v√† ƒëi th√¥i! Cu·ªôc s·ªëng ng·∫Øn l·∫Øm ƒë√≥ ü•∞",
                    "üåÖ Ho√†ng h√¥n ·ªü ƒë√¢y ƒë·∫πp qu√°, ∆∞·ªõc g√¨ ƒë∆∞·ª£c ·ªü l·∫°i m√£i üí´"
                ],
                cool: [
                    "üåç Collect moments, not things üì∏",
                    "‚õ∞Ô∏è ƒê·ªânh cao n√†o c≈©ng chinh ph·ª•c ƒë∆∞·ª£c üî•",
                    "üóø Born to travel, forced to work üòé",
                    "üèùÔ∏è Paradise found üå¥üíØ",
                    "üßó Adventure is out there, go get it üí™"
                ],
                poetic: [
                    "üåÖ N∆°i ch√¢n tr·ªùi g·∫∑p m·∫∑t bi·ªÉn, l√† n∆°i tim m√¨nh an y√™n üåä",
                    "üèîÔ∏è N√∫i cao ch·∫≥ng ng·∫°i, ƒë∆∞·ªùng d√†i ch·∫≥ng s·ª£, ch·ªâ s·ª£ ch·∫≥ng d√°m ƒëi üçÉ",
                    "üåÑ M·ªói mi·ªÅn ƒë·∫•t ƒë·∫øn l√† m·ªôt c√¢u chuy·ªán ƒë∆∞·ª£c k·ªÉ üìñ",
                    "üõ§Ô∏è ƒê∆∞·ªùng ƒëi m·ªõi bi·∫øt non cao, l√≤ng ta m·ªõi bi·∫øt ta cao th·∫ø n√†o üåô",
                    "üå∏ Du l·ªãch kh√¥ng ch·ªâ l√† ƒëi, m√† l√† t√¨m v·ªÅ v·ªõi ch√≠nh m√¨nh ‚ú®"
                ],
                "gen-z": [
                    "üß≥ Workation m√† c√°c c·ª•, l√†m ƒë√¢u c≈©ng ƒë∆∞·ª£c üíª‚òÄÔ∏è",
                    "üìç Check-in ƒë·ªãa ƒëi·ªÉm hot trend ƒë√¢y n√® üî•",
                    "üèÉ ƒêi ch∆°i v·ªÅ m·ªát x·ªâu nh∆∞ng worth it l·∫Øm üòµ‚Äçüí´üíÖ",
                    "üóº ƒê·ªãa ƒëi·ªÉm n√†y x·ªãn x√≤ qu√° tr·ªùi qu√° ƒë·∫•t ü§Ø",
                    "‚úàÔ∏è Bay th√¥i, ti·ªÅn ƒë·ªÉ l√†m g√¨ kh√¥ng bay ü´°"
                ]
            },
            food: {
                cute: [
                    "üçú ƒÇn no r·ªìi m·ªõi c√≥ s·ª©c y√™u ƒë·ªùi n√® üòãüíï",
                    "üßÅ Ng·ªçt nh∆∞ cupcake, ƒë√°ng y√™u nh∆∞ m√¨nh ü•∞",
                    "üç≥ B·ªØa s√°ng healthy cho m·ªôt ng√†y nƒÉng ƒë·ªông üå∏",
                    "üçï Calories don't count on weekends ha üòÇüíñ",
                    "üçµ Tr√† s·ªØa v√† b·∫°n th√¢n = Combo ho√†n h·∫£o üßã‚ú®"
                ],
                cool: [
                    "üçî Foodie life is the best life üî•",
                    "ü•© Eat well, travel often, no regrets üíØ",
                    "üç£ Sushi time = Happy time üòé",
                    "üç∑ Good food, good mood üñ§",
                    "üçú Ph·ªü is love, ph·ªü is life üáªüá≥üí™"
                ],
                poetic: [
                    "‚òï C√† ph√™ bu·ªïi s√°ng, thanh th·∫£n c·∫£ ng√†y üåø",
                    "üçÉ M·ªói m√≥n ƒÉn l√† m·ªôt c√¢u chuy·ªán, m·ªói v·ªã l√† m·ªôt k·ª∑ ni·ªám üå∏",
                    "üçµ Nh√¢m nhi t·ª´ng gi·ªçt tr√†, th·ªùi gian nh∆∞ ng·ª´ng tr√¥i üåô",
                    "üåæ C∆°m m·∫π n·∫•u, h∆∞∆°ng v·ªã c·ªßa y√™u th∆∞∆°ng üí´",
                    "ü•¢ ·∫®m th·ª±c Vi·ªát Nam - Tinh hoa c·ªßa ƒë·∫•t tr·ªùi üáªüá≥‚ú®"
                ],
                "gen-z": [
                    "üçú ƒÇn xong review li·ªÅn, trust me bro ngon l·∫Øm üî•",
                    "üßã Tr√† s·ªØa 3 ly m·ªôt ng√†y, broke nh∆∞ng worth üíÖ",
                    "üçï Cheat day kh√¥ng c√≥ t·ªôi nha, t·ªôi l√† kh√¥ng ƒÉn üò≠",
                    "üç± Flex b·ªØa ƒÉn x·ªãn x√≤, ai cho tui t·ª± n·∫•u üë©‚Äçüç≥‚ú®",
                    "ü•ó Eat clean ƒë∆∞·ª£c 1 b·ªØa, 2 b·ªØa c√≤n l·∫°i ƒÉn b√π ü§°"
                ]
            },
            love: {
                cute: [
                    "üíï C√≥ ng∆∞·ªùi ƒë·ªÉ th∆∞∆°ng l√† ƒëi·ªÅu h·∫°nh ph√∫c nh·∫•t ü•∞",
                    "üíë B√™n nhau l√† ƒë·ªß, kh√¥ng c·∫ßn g√¨ th√™m üå∏",
                    "üíñ Y√™u m·ªôt ng∆∞·ªùi l√† mu·ªën c√πng h·ªç ƒëi h·∫øt cu·ªôc ƒë·ªùi üí´",
                    "ü•∫ Anh/Em l√† ƒëi·ªÅu tuy·ªát v·ªùi nh·∫•t x·∫£y ra v·ªõi em/anh üíï",
                    "üë´ Home is not a place, it's a person üè†üíñ"
                ],
                cool: [
                    "üñ§ You and me against the world üî•",
                    "üíç Partners in crime, lovers in life üòé",
                    "‚ö° Two souls, one heart, infinite love üíØ",
                    "üåπ Love like there's no tomorrow üñ§",
                    "üí™ My ride or die, my everything üëä"
                ],
                poetic: [
                    "üåô Em l√† √°nh trƒÉng, soi s√°ng ƒë√™m d√†i c·ªßa anh üí´",
                    "üå∏ Y√™u m·ªôt ng∆∞·ªùi l√† ƒë·ªÉ nh·ªØng m√πa hoa n·ªü trong l√≤ng üå∑",
                    "‚ú® C√≥ em, ng√†y n√†o c≈©ng l√† ng√†y ƒë·∫πp tr·ªùi üåÖ",
                    "ü¶ã T√¨nh y√™u ƒë·∫øn nh·∫π nh√†ng nh∆∞ c√°nh b∆∞·ªõm trong v∆∞·ªùn üåø",
                    "üåπ D√π bao m√πa ƒëi qua, t√¨nh n√†y v·∫´n kh√¥ng ƒë·ªïi thay üíï"
                ],
                "gen-z": [
                    "üíÖ ƒê√£ c√≥ b·ªì, ƒë·ª´ng th·∫£ th√≠nh üôÖ‚Äç‚ôÄÔ∏è",
                    "ü§° Single? No. In a relationship? Also no. IQ? Yes üòµ‚Äçüí´",
                    "üíÄ Crush kh√¥ng nh√¨n m√¨nh nh∆∞ng m√¨nh v·∫´n y√™u üò≠üíî",
                    "ü´∂ My person ƒë√¢y r·ªìi, stop searching üîí",
                    "üòé Taken v√† happy l·∫Øm nha, h√¥ng c√≥ available ƒë√¢u üíï"
                ]
            },
            motivation: {
                cute: [
                    "üå∏ C·ªë l√™n n√†o, m·ªçi th·ª© r·ªìi s·∫Ω t·ªët ƒë·∫πp th√¥i! üí™üíï",
                    "‚ú® B·∫°n gi·ªèi h∆°n b·∫°n nghƒ© r·∫•t nhi·ªÅu ƒë·∫•y ü•∞",
                    "üåà Sau c∆°n m∆∞a tr·ªùi l·∫°i s√°ng, tin m√¨nh ƒëi üå§Ô∏è",
                    "üíñ H√£y l√† phi√™n b·∫£n t·ªët nh·∫•t c·ªßa ch√≠nh m√¨nh üåü",
                    "üçÄ M·ªói ng√†y l√† m·ªôt c∆° h·ªôi m·ªõi ƒë·ªÉ t·ªèa s√°ng üí´"
                ],
                cool: [
                    "üî• The only limit is you. Break it! üí™",
                    "‚ö° Champions are made when no one is watching üèÜ",
                    "üíØ Stay hungry, stay foolish üöÄ",
                    "üñ§ If it doesn't challenge you, it won't change you üòé",
                    "üí™ Winners never quit, quitters never win üî•"
                ],
                poetic: [
                    "üåÖ M·ªói b√¨nh minh l√† m·ªôt kh·ªüi ƒë·∫ßu m·ªõi, h√£y s·ªëng tr·ªçn v·∫πn üå∏",
                    "ü¶Ö Bay cao ƒë·ªÉ th·∫•y th·∫ø gi·ªõi r·ªông l·ªõn, ch·ª© kh√¥ng ph·∫£i v·∫•n ƒë·ªÅ nh·ªè b√© üí´",
                    "üåø Th·∫•t b·∫°i kh√¥ng ph·∫£i l√† ng√£, m√† l√† kh√¥ng ƒë·ª©ng d·∫≠y üå±",
                    "‚ú® H√£y ƒë·ªÉ nh·ªØng gi·∫•c m∆° c·ªßa h√¥m nay th√†nh hi·ªán th·ª±c c·ªßa ng√†y mai üåô",
                    "üåª S·ªëng nh∆∞ hoa h∆∞·ªõng d∆∞∆°ng, lu√¥n h∆∞·ªõng v·ªÅ ph√≠a m·∫∑t tr·ªùi üåû"
                ],
                "gen-z": [
                    "üí™ Grind kh√¥ng ngh·ªâ, th√†nh c√¥ng t·ª± ƒë·∫øn üìà",
                    "üî• Haters gonna hate, winners gonna win üòé",
                    "üíÖ Boss up bestie, ƒë·ª´ng ƒë·ªÉ ai b·∫£o m√¨nh kh√¥ng ƒë∆∞·ª£c üó£Ô∏è",
                    "üöÄ Hustle hard = Play hard = Win hard üíØ",
                    "üíÄ Tired? Sleep later. Successful? That's the goal üéØ"
                ]
            },
            funny: {
                cute: [
                    "ü§™ M·∫∑t cute nh∆∞ng l∆∞·ªùi v√¥ ƒë·ªëi lu√¥n n√® üòÇüíï",
                    "üê∏ √ö √π, ƒë√¢y l√† m√¨nh khi th·∫•y ƒë·ªì ƒÉn üçï",
                    "üòÖ NƒÉng nh√¥ng ƒë·ªông nh√¥ng l√† m√¨nh ƒë√¢y üå∏",
                    "ü§≠ Xinh g√°i/trai th√¨ ƒë∆∞·ª£c quy·ªÅn nh√µng nh·∫Ωo üíñ",
                    "üòã ƒÇn no ng·ªß k·ªπ l√† b√≠ quy·∫øt tr·∫ª ƒë·∫πp ü•∞"
                ],
                cool: [
                    "üòé Ng∆∞·ªùi ta g·ªçi tui l√†... c≈©ng h√¥ng ai g·ªçi ü§∑",
                    "üôÉ I'm not lazy, I'm on energy saving mode üîã",
                    "üíÄ My wallet is like an onion, opening it makes me cry üò≠",
                    "ü§° Professionally lost but making it look good üíÖ",
                    "üòè Sorry I'm late, I didn't want to come üö™"
                ],
                poetic: [
                    "üåô ƒê√™m khuya suy nghƒ© v·ªÅ ƒë·ªùi... ch·ªß y·∫øu l√† nghƒ© v·ªÅ ƒÉn g√¨ üçú",
                    "üå∏ Hoa n·ªü hay t√¥i n·ªü, c√≥ khi l√† c√°i v√≠ n·ªü th√¥i üí∏",
                    "‚òÅÔ∏è M√¢y tr√¥i b·ªìng b·ªÅnh, nh∆∞ l∆∞∆°ng th√°ng n√†y tr√¥i ƒëi m·∫•t üò≠",
                    "ü¶ã B∆∞·ªõm ƒë·∫πp th·∫ø m√† c√≤n bay, tui ƒë·∫πp th·∫ø m√† ch·ªâ n·∫±m üõãÔ∏è",
                    "‚ú® S·ªëng ch·∫≠m l·∫°i v√¨... kh√¥ng c√≥ ti·ªÅn ƒëi nhanh üê¢"
                ],
                "gen-z": [
                    "üíÄ I ·ªët ƒë√¢y, ƒë·ªùi c√≥ g√¨ ƒë√°ng ƒë·ªÉ t·ªânh t√°o ƒë√¢u üòµ‚Äçüí´",
                    "ü§° Xu n√†o c≈©ng v·∫≠y, ngh√®o nh·∫•t ƒë·ªãnh üí∏",
                    "üò≠ Crush c√≥ ng∆∞·ªùi y√™u r, m√¨nh c≈©ng c√≥... ƒëi·ªán tho·∫°i üì±",
                    "ü´† Motivation h√¥m nay: kh√¥ng c√≥ ·∫° üìâ",
                    "üíÖ It's giving... broke but make it fashion üëó"
                ]
            },
            aesthetic: {
                cute: [
                    "üå∏ Dreamy vibes only üí≠üíï",
                    "ü¶ã Soft and sweet like cotton candy ‚òÅÔ∏è",
                    "‚ú® Living in a fairytale üè∞üíñ",
                    "üå∑ Pretty in pink, pretty in everything üéÄ",
                    "üçÉ Gentle soul, gentle heart ü§ç"
                ],
                cool: [
                    "üñ§ Dark aesthetic, bright soul ‚ú®",
                    "üåô Midnight thoughts, golden dreams üí´",
                    "‚õìÔ∏è Chaos with class üî•",
                    "üïäÔ∏è Clean aesthetic, messy life üòé",
                    "üíé Rare like a diamond, shine like one too ‚ú®"
                ],
                poetic: [
                    "üåø Gi·ªØa ·ªìn √†o cu·ªôc s·ªëng, t√¨m m·ªôt g√≥c b√¨nh y√™n üå∏",
                    "üåô ƒê√™m tƒ©nh l·∫∑ng, t√¢m h·ªìn ƒë∆∞·ª£c t·ª± do bay b·ªïng ‚ú®",
                    "ü¶¢ Thanh l·ªãch nh∆∞ thi√™n nga, nh·∫π nh√†ng nh∆∞ m√¢y tr√¥i ‚òÅÔ∏è",
                    "üå∑ V·∫ª ƒë·∫πp kh√¥ng c·∫ßn ƒëi·ªÉm t√¥, t·ª± n√≥ ƒë√£ r·ª±c r·ª° üí´",
                    "üçÉ C√≥ nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫πp ƒë·∫øn nao l√≤ng üåÖ"
                ],
                "gen-z": [
                    "‚ú® Vibes immaculate, energy unmatched üíÖ",
                    "üåô Dark academia but make it Vietnamese üìö",
                    "ü¶ã Cottagecore aesthetic ƒë√™ c√°c b·∫°n ∆°i üå∏",
                    "üí´ Pinterest reality check: nailed it üì∏",
                    "üñ§ Giving main character energy ‚ú®"
                ]
            },
            deep: {
                cute: [
                    "üåô ƒê√™m nay suy nghƒ© nhi·ªÅu qu√°, nh∆∞ng v·∫´n y√™u ƒë·ªùi n√® üíï",
                    "üå∏ M·ªói ng∆∞·ªùi ƒë·ªÅu c√≥ c√¢u chuy·ªán ri√™ng c·ªßa m√¨nh ü•∞",
                    "‚ú® Ch·∫•p nh·∫≠n b·∫£n th√¢n l√† b∆∞·ªõc ƒë·∫ßu ti√™n ƒë·ªÉ h·∫°nh ph√∫c üíñ",
                    "üåà Kh√¥ng ho√†n h·∫£o c≈©ng kh√¥ng sao, m√¨nh v·∫´n ƒë√°ng y√™u m√† ü•∫",
                    "üí´ Th·ªùi gian s·∫Ω ch·ªØa l√†nh m·ªçi v·∫øt th∆∞∆°ng üåø"
                ],
                cool: [
                    "üñ§ Pain made me, but it won't break me üí™",
                    "üåô Silence speaks louder than words üî•",
                    "‚öîÔ∏è What doesn't kill you makes you stronger üíØ",
                    "üå™Ô∏è From the storm, a warrior is born üòé",
                    "üíé Pressure makes diamonds üíé"
                ],
                poetic: [
                    "üåô Trong ƒë√™m t·ªëi nh·∫•t, v·∫´n t√¨m th·∫•y √°nh sao ‚ú®",
                    "üåä S√≥ng c√≥ l√∫c d·ªØ d·ªôi, c√≥ l√∫c √™m ƒë·ªÅm, nh∆∞ cu·ªôc ƒë·ªùi n√†y üåÖ",
                    "üçÇ L√° r·ª•ng ƒë·ªÉ m√πa xu√¢n l·∫°i v·ªÅ, n·ªói bu·ªìn qua ƒë·ªÉ ni·ªÅm vui ƒë·∫øn üå∏",
                    "üåø C√≥ nh·ªØng n·ªói ƒëau ch·ªâ m√¨nh m√¨nh hi·ªÉu, v√† ch·ªâ m√¨nh ch·ªØa l√†nh üí´",
                    "ü¶Ö Bay cao h∆°n nh·ªØng gi√¥ng b√£o, v√¨ ta sinh ra ƒë·ªÉ t·ª± do üåô"
                ],
                "gen-z": [
                    "üíÄ Overthinking at 3am, again üåô",
                    "ü´† Healing era nh∆∞ng c≈©ng c√≥ l√∫c breakdown üò≠",
                    "üíÖ Trauma response nh∆∞ng make it quirky ‚ú®",
                    "üñ§ Emotionally unavailable but still want love üíî",
                    "üåô Sad hours activated, nh∆∞ng v·∫´n slay üíÖ"
                ]
            }
        };

        // Upload handlers
        uploadArea.addEventListener('click', (e) => {
            if (e.target !== changeImageBtn && !changeImageBtn.contains(e.target)) {
                fileInput.click();
            }
        });

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                handleFile(file);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files[0]) {
                handleFile(e.target.files[0]);
            }
        });

        changeImageBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            fileInput.click();
        });

        function handleFile(file) {
            currentImage = file;
            const reader = new FileReader();

            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    previewImage.src = e.target.result;

                    const width = img.width;
                    const height = img.height;
                    const aspect = (width / height).toFixed(2);
                    const size = (file.size / 1024).toFixed(1);

                    imageInfo.innerHTML = `
                        <span class="info-badge">
                            <span class="material-icons-round">straighten</span>
                            ${width} √ó ${height}
                        </span>
                        <span class="info-badge">
                            <span class="material-icons-round">aspect_ratio</span>
                            ${aspect}:1
                        </span>
                        <span class="info-badge">
                            <span class="material-icons-round">save</span>
                            ${size} KB
                        </span>
                    `;

                    uploadContent.style.display = 'none';
                    previewContainer.classList.add('show');
                    uploadArea.classList.add('has-image');
                    generatePromptBtn.disabled = false;
                    generateCaptionBtn.disabled = false;
                };
                img.src = e.target.result;
            };

            reader.readAsDataURL(file);
        }

        // Option buttons for prompts
        optionBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                optionBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                selectedType = btn.dataset.type;
            });
        });

        styleChips.forEach(chip => {
            chip.addEventListener('click', () => {
                styleChips.forEach(c => c.classList.remove('active'));
                chip.classList.add('active');
                selectedStyle = chip.dataset.style;
            });
        });

        // Caption options
        captionOptions.forEach(opt => {
            opt.addEventListener('click', () => {
                captionOptions.forEach(o => o.classList.remove('active'));
                opt.classList.add('active');
                selectedMood = opt.dataset.mood;
            });
        });

        captionStyles.forEach(style => {
            style.addEventListener('click', () => {
                captionStyles.forEach(s => s.classList.remove('active'));
                style.classList.add('active');
                selectedCapStyle = style.dataset.capstyle;
            });
        });

        // Generate prompts
        generatePromptBtn.addEventListener('click', async () => {
            if (!currentImage) return;

            promptLoading.classList.add('show');
            promptResults.classList.remove('show');
            generatePromptBtn.disabled = true;

            await new Promise(resolve => setTimeout(resolve, 1200));

            const analysis = analyzeImage();
            const prompts = generatePrompts(analysis);
            displayPrompts(prompts);

            promptLoading.classList.remove('show');
            promptResults.classList.add('show');
            generatePromptBtn.disabled = false;
        });

        // Generate captions
        generateCaptionBtn.addEventListener('click', async () => {
            if (!currentImage) return;

            captionLoading.classList.add('show');
            captionResults.classList.remove('show');
            generateCaptionBtn.disabled = true;

            await new Promise(resolve => setTimeout(resolve, 1000));

            const captions = generateCaptions();
            displayCaptions(captions);

            captionLoading.classList.remove('show');
            captionResults.classList.add('show');
            generateCaptionBtn.disabled = false;
        });

        function analyzeImage() {
            const img = previewImage;
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;
            ctx.drawImage(img, 0, 0);

            const aspect = canvas.width / canvas.height;
            let type = 'general';
            if (aspect > 1.5) type = 'landscape';
            else if (aspect < 0.8) type = 'portrait';
            else type = 'square format';

            const descriptions = [
                'a detailed scene with interesting composition',
                'subjects with natural lighting',
                'a moment captured with artistic intent'
            ];

            return {
                width: canvas.width,
                height: canvas.height,
                aspect: aspect > 1 ? `${Math.round(aspect * 10) / 10}:1` : `1:${Math.round(10 / aspect) / 10}`,
                type: type,
                description: descriptions[Math.floor(Math.random() * descriptions.length)]
            };
        }

        function generatePrompts(analysis) {
            const style = styleDescriptions[selectedStyle];
            const templates = promptTemplates[selectedType];

            return {
                main: { label: 'üìù Prompt Ch√≠nh', text: templates.main(style, analysis) },
                midjourney: { label: 'üé® Midjourney', text: templates.midjourney(style, analysis) },
                dalle: { label: 'ü§ñ DALL-E', text: templates.dalle(style, analysis) },
                stable: { label: 'üñºÔ∏è Stable Diffusion', text: templates.stable(style, analysis) }
            };
        }

        function generateCaptions() {
            const moodCaptions = captionTemplates[selectedMood][selectedCapStyle];
            // Shuffle and pick 4 captions
            const shuffled = [...moodCaptions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 4);
        }

        function displayPrompts(prompts) {
            promptCards.innerHTML = '';
            for (const [key, prompt] of Object.entries(prompts)) {
                const card = document.createElement('div');
                card.className = 'prompt-card';
                card.innerHTML = `
                    <div class="prompt-card-header">
                        <span class="prompt-label">${prompt.label}</span>
                        <button class="copy-btn" onclick="copyText(this, 'prompt-${key}')">
                            <span class="material-icons-round">content_copy</span>
                            Copy
                        </button>
                    </div>
                    <div class="prompt-text" id="prompt-${key}">${prompt.text}</div>
                `;
                promptCards.appendChild(card);
            }
        }

        function displayCaptions(captions) {
            captionCards.innerHTML = '';
            captions.forEach((caption, index) => {
                const card = document.createElement('div');
                card.className = 'prompt-card';
                card.innerHTML = `
                    <div class="prompt-card-header">
                        <span class="prompt-label">üí¨ Caption ${index + 1}</span>
                        <button class="copy-btn" onclick="copyText(this, 'caption-${index}')">
                            <span class="material-icons-round">content_copy</span>
                            Copy
                        </button>
                    </div>
                    <div class="caption-text" id="caption-${index}">${caption}</div>
                `;
                captionCards.appendChild(card);
            });
        }

        window.copyText = function (btn, id) {
            const text = document.getElementById(id).textContent;
            navigator.clipboard.writeText(text).then(() => {
                btn.classList.add('copied');
                btn.innerHTML = `<span class="material-icons-round">check</span> ƒê√£ copy!`;
                setTimeout(() => {
                    btn.classList.remove('copied');
                    btn.innerHTML = `<span class="material-icons-round">content_copy</span> Copy`;
                }, 2000);
            });
        };
    </script>
</body>

</html>