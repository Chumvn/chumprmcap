<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChumPrompt - AI Prompt Generator</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' style='stop-color:%236366f1'/><stop offset='100%25' style='stop-color:%23ec4899'/></linearGradient></defs><circle cx='50' cy='50' r='45' fill='url(%23g)'/><text x='50' y='65' text-anchor='middle' font-size='40' fill='white'>C</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --secondary: #ec4899;
            --bg: #e8eef5;
            --bg-card: #e0e5ec;
            --text: #2d3748;
            --text-secondary: #64748b;
            --shadow-light: rgba(255, 255, 255, 0.8);
            --shadow-dark: rgba(163, 177, 198, 0.6);
            --success: #10b981;
        }

        .dark {
            --bg: #1a1a2e;
            --bg-card: #16162a;
            --text: #f1f5f9;
            --text-secondary: #94a3b8;
            --shadow-light: rgba(255, 255, 255, 0.05);
            --shadow-dark: rgba(0, 0, 0, 0.5);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: all 0.3s;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            padding: 16px;
            padding-bottom: 80px;
        }

        /* Neumorphism */
        .neu {
            background: var(--bg-card);
            border-radius: 20px;
            box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
        }

        .neu-inset {
            background: var(--bg-card);
            border-radius: 16px;
            box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
        }

        .neu-btn {
            background: var(--bg-card);
            border: none;
            border-radius: 12px;
            box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light);
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text);
        }

        .neu-btn:hover {
            transform: translateY(-2px);
        }

        .neu-btn:active,
        .neu-btn.active {
            box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
        }

        /* Header */
        header {
            text-align: center;
            padding: 24px 0;
        }

        .logo {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-size: 28px;
            font-weight: 700;
            color: white;
        }

        h1 {
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-top: 6px;
        }

        /* Top bar */
        .top-bar {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-bottom: 16px;
        }

        .icon-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        /* Main Tabs */
        .main-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            padding: 8px;
        }

        .main-tab {
            flex: 1;
            padding: 12px 8px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .main-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .main-tab .material-icons-round {
            font-size: 22px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Upload */
        .upload-area {
            padding: 32px 16px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .upload-area:hover {
            transform: scale(1.01);
        }

        .upload-area.has-image {
            padding: 16px;
        }

        .upload-icon {
            font-size: 42px;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .preview-container {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .preview-container.show {
            display: flex;
        }

        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 12px;
        }

        .info-badge {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .image-info {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        #fileInput {
            display: none;
        }

        /* Sections */
        .section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .section-title .material-icons-round {
            font-size: 18px;
            color: var(--primary);
        }

        /* Options Grid */
        .options-scroll {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 4px;
            -webkit-overflow-scrolling: touch;
        }

        .options-scroll::-webkit-scrollbar {
            height: 0;
        }

        .opt-chip {
            flex-shrink: 0;
            padding: 10px 14px;
            font-size: 0.75rem;
            white-space: nowrap;
        }

        .opt-chip.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        /* Category Accordion */
        .category {
            margin-bottom: 12px;
        }

        .category-header {
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .category-header .material-icons-round {
            transition: transform 0.3s;
        }

        .category.open .category-header .material-icons-round {
            transform: rotate(180deg);
        }

        .category-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s;
            padding: 0 12px;
        }

        .category.open .category-content {
            max-height: 1000px;
            padding: 12px;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .tech-btn {
            padding: 10px;
            font-size: 0.7rem;
            text-align: left;
        }

        .tech-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .tech-btn .emoji {
            font-size: 16px;
            margin-right: 6px;
        }

        /* Generate Button */
        .gen-btn {
            width: 100%;
            padding: 16px;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.3);
            transition: all 0.3s;
        }

        .gen-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }

        .gen-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Results */
        .results {
            display: none;
        }

        .results.show {
            display: block;
        }

        .result-card {
            padding: 16px;
            margin-bottom: 12px;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .result-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .copy-btn {
            padding: 6px 12px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .copy-btn.copied {
            background: var(--success);
            color: white;
        }

        .result-text {
            font-size: 0.85rem;
            line-height: 1.7;
            padding: 12px;
            border-left: 3px solid var(--primary);
        }

        .result-text.caption {
            border-left-color: var(--secondary);
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--shadow-dark);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 12px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Caption Options */
        .caption-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .caption-opt {
            padding: 12px 8px;
            text-align: center;
            font-size: 0.7rem;
        }

        .caption-opt .emoji {
            font-size: 24px;
            display: block;
            margin-bottom: 4px;
        }

        .caption-opt.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        /* Learned Prompts */
        .learned-item {
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 10px;
        }

        .learned-text {
            flex: 1;
            font-size: 0.8rem;
            line-height: 1.5;
            word-break: break-word;
        }

        .learned-actions {
            display: flex;
            gap: 6px;
            flex-shrink: 0;
        }

        .small-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .empty-state .material-icons-round {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 16px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .tech-grid {
                grid-template-columns: 1fr;
            }

            .caption-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .main-tab {
                padding: 10px 6px;
                font-size: 0.7rem;
            }

            h1 {
                font-size: 1.3rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Top Bar -->
        <div class="top-bar">
            <button class="neu-btn icon-btn" id="langBtn" title="EN/VI">üáªüá≥</button>
            <button class="neu-btn icon-btn" id="themeBtn" title="Dark/Light">üåô</button>
        </div>

        <header>
            <div class="logo">C</div>
            <h1 data-vi="ChumPrompt" data-en="ChumPrompt">ChumPrompt</h1>
            <p class="subtitle" data-vi="T·∫°o prompt chuy√™n nghi·ªáp cho AI" data-en="Professional AI prompt generator">T·∫°o
                prompt chuy√™n nghi·ªáp cho AI</p>
        </header>

        <!-- Main Tabs -->
        <div class="main-tabs neu">
            <button class="neu-btn main-tab active" data-tab="prompt">
                <span class="material-icons-round">auto_awesome</span>
                <span data-vi="Prompt" data-en="Prompt">Prompt</span>
            </button>
            <button class="neu-btn main-tab" data-tab="caption">
                <span class="material-icons-round">edit_note</span>
                <span data-vi="Caption" data-en="Caption">Caption</span>
            </button>
            <button class="neu-btn main-tab" data-tab="learn">
                <span class="material-icons-round">school</span>
                <span data-vi="H·ªçc Prompt" data-en="Learn">H·ªçc Prompt</span>
            </button>
        </div>

        <!-- Upload -->
        <div class="upload-area neu" id="uploadArea">
            <div id="uploadContent">
                <span class="material-icons-round upload-icon">add_photo_alternate</span>
                <h3 data-vi="T·∫£i ·∫£nh l√™n" data-en="Upload image">T·∫£i ·∫£nh l√™n</h3>
                <p class="subtitle" data-vi="K√©o th·∫£ ho·∫∑c nh·∫•n ch·ªçn" data-en="Drag & drop or click">K√©o th·∫£ ho·∫∑c nh·∫•n
                    ch·ªçn</p>
            </div>
            <div class="preview-container" id="previewContainer">
                <img id="previewImage" class="preview-image" alt="Preview">
                <div class="image-info" id="imageInfo"></div>
                <button class="neu-btn opt-chip" id="changeBtn" data-vi="ƒê·ªïi ·∫£nh" data-en="Change">ƒê·ªïi ·∫£nh</button>
            </div>
            <input type="file" id="fileInput" accept="image/*">
        </div>

        <!-- Tab 1: Prompt -->
        <div class="tab-content active" id="promptTab">
            <!-- Camera Angles -->
            <div class="category neu">
                <div class="category-header neu-btn" onclick="toggleCategory(this)">
                    <span>üì∑ <span data-vi="G√≥c M√°y" data-en="Camera Angles">G√≥c M√°y</span></span>
                    <span class="material-icons-round">expand_more</span>
                </div>
                <div class="category-content">
                    <div class="tech-grid" id="anglesGrid"></div>
                </div>
            </div>

            <!-- Shot Sizes -->
            <div class="category neu">
                <div class="category-header neu-btn" onclick="toggleCategory(this)">
                    <span>üé¨ <span data-vi="C·ª° C·∫£nh" data-en="Shot Sizes">C·ª° C·∫£nh</span></span>
                    <span class="material-icons-round">expand_more</span>
                </div>
                <div class="category-content">
                    <div class="tech-grid" id="shotsGrid"></div>
                </div>
            </div>

            <!-- Composition -->
            <div class="category neu">
                <div class="category-header neu-btn" onclick="toggleCategory(this)">
                    <span>üñºÔ∏è <span data-vi="B·ªë C·ª•c" data-en="Composition">B·ªë C·ª•c</span></span>
                    <span class="material-icons-round">expand_more</span>
                </div>
                <div class="category-content">
                    <div class="tech-grid" id="compositionGrid"></div>
                </div>
            </div>

            <!-- Effects -->
            <div class="category neu">
                <div class="category-header neu-btn" onclick="toggleCategory(this)">
                    <span>‚ú® <span data-vi="Hi·ªáu ·ª®ng" data-en="Effects">Hi·ªáu ·ª®ng</span></span>
                    <span class="material-icons-round">expand_more</span>
                </div>
                <div class="category-content">
                    <div class="tech-grid" id="effectsGrid"></div>
                </div>
            </div>

            <!-- Lighting -->
            <div class="category neu">
                <div class="category-header neu-btn" onclick="toggleCategory(this)">
                    <span>üí° <span data-vi="√Ånh S√°ng" data-en="Lighting">√Ånh S√°ng</span></span>
                    <span class="material-icons-round">expand_more</span>
                </div>
                <div class="category-content">
                    <div class="tech-grid" id="lightingGrid"></div>
                </div>
            </div>

            <!-- Colors -->
            <div class="category neu">
                <div class="category-header neu-btn" onclick="toggleCategory(this)">
                    <span>üé® <span data-vi="M√†u S·∫Øc" data-en="Colors">M√†u S·∫Øc</span></span>
                    <span class="material-icons-round">expand_more</span>
                </div>
                <div class="category-content">
                    <div class="tech-grid" id="colorsGrid"></div>
                </div>
            </div>

            <!-- Quality Keywords -->
            <div class="section">
                <h3 class="section-title">
                    <span class="material-icons-round">diamond</span>
                    <span data-vi="Ch·∫•t l∆∞·ª£ng" data-en="Quality">Ch·∫•t l∆∞·ª£ng</span>
                </h3>
                <div class="options-scroll" id="qualityChips"></div>
            </div>

            <button class="gen-btn" id="genPromptBtn" disabled>
                <span class="material-icons-round">auto_awesome</span>
                <span data-vi="T·∫°o Prompt" data-en="Generate Prompt">T·∫°o Prompt</span>
            </button>

            <div class="loading" id="promptLoading">
                <div class="spinner"></div>
                <p data-vi="ƒêang t·∫°o prompt..." data-en="Generating...">ƒêang t·∫°o prompt...</p>
            </div>

            <div class="results" id="promptResults"></div>
        </div>

        <!-- Tab 2: Caption -->
        <div class="tab-content" id="captionTab">
            <div class="section">
                <h3 class="section-title">
                    <span class="material-icons-round">mood</span>
                    <span data-vi="Ch·ªß ƒë·ªÅ" data-en="Topic">Ch·ªß ƒë·ªÅ</span>
                </h3>
                <div class="caption-grid" id="moodGrid"></div>
            </div>

            <div class="section">
                <h3 class="section-title">
                    <span class="material-icons-round">style</span>
                    <span data-vi="Phong c√°ch" data-en="Style">Phong c√°ch</span>
                </h3>
                <div class="options-scroll" id="styleChips"></div>
            </div>

            <button class="gen-btn" id="genCaptionBtn" disabled>
                <span class="material-icons-round">edit_note</span>
                <span data-vi="T·∫°o Caption" data-en="Generate Caption">T·∫°o Caption</span>
            </button>

            <div class="loading" id="captionLoading">
                <div class="spinner"></div>
                <p data-vi="ƒêang t·∫°o caption..." data-en="Generating...">ƒêang t·∫°o caption...</p>
            </div>

            <div class="results" id="captionResults"></div>
        </div>

        <!-- Tab 3: Learn -->
        <div class="tab-content" id="learnTab">
            <div class="section">
                <button class="gen-btn" id="analyzeBtn" disabled>
                    <span class="material-icons-round">psychology</span>
                    <span data-vi="Ph√¢n t√≠ch ·∫£nh ‚Üí Prompt" data-en="Analyze Image ‚Üí Prompt">Ph√¢n t√≠ch ·∫£nh ‚Üí
                        Prompt</span>
                </button>
            </div>

            <div class="loading" id="learnLoading">
                <div class="spinner"></div>
                <p data-vi="ƒêang ph√¢n t√≠ch..." data-en="Analyzing...">ƒêang ph√¢n t√≠ch...</p>
            </div>

            <div class="results" id="learnResults"></div>

            <div class="section">
                <h3 class="section-title">
                    <span class="material-icons-round">bookmark</span>
                    <span data-vi="Prompt ƒë√£ l∆∞u" data-en="Saved Prompts">Prompt ƒë√£ l∆∞u</span>
                </h3>
                <div id="savedPrompts"></div>
            </div>
        </div>

        <footer>
            Made with ‚ù§Ô∏è by <a href="https://github.com/Chumvn" target="_blank">Chum</a>
        </footer>
    </div>

    <script>
        // Data
        const TECHNIQUES = {
            angles: [
                { vi: "G√≥c Ngang T·∫ßm M·∫Øt", en: "Eye Level", desc: "Camera positioned at the subject's eye height, creating natural and relatable perspective" },
                { vi: "G√≥c Cao", en: "High Angle", desc: "Camera looking down on subject from above, making subject appear smaller or vulnerable" },
                { vi: "G√≥c Th·∫•p", en: "Low Angle", desc: "Camera looking up at subject from below, making subject appear powerful and dominant" },
                { vi: "G√≥c Nghi√™ng", en: "Dutch Angle", desc: "Camera tilted diagonally creating tension and unease, off-kilter composition" },
                { vi: "G√≥c Nghi√™ng Th·∫•p", en: "Dutch Low Angle", desc: "Tilted camera from low position, combining power with disorientation" },
                { vi: "G√≥c Nh√¨n T·ª´ Tr√™n Cao", en: "Bird's Eye View", desc: "Camera directly overhead looking straight down, god-like perspective, aerial view" },
                { vi: "G√≥c Nh√¨n C·ªßa Ki·∫øn", en: "Worm's Eye View", desc: "Camera at ground level looking straight up, extreme low angle perspective" },
                { vi: "G√≥c Nh√¨n Ng√¥i Th·ª© Nh·∫•t", en: "POV Shot", desc: "Camera shows exactly what the character sees, first-person perspective" },
                { vi: "G√≥c Qua Vai", en: "Over The Shoulder", desc: "Camera positioned behind subject's shoulder looking at what they see" },
                { vi: "Ngang Vai", en: "Shoulder Level", desc: "Camera at shoulder height, slightly below eye level" },
                { vi: "Ngang H√¥ng", en: "Hip Level", desc: "Camera at hip height, creating dynamic low-medium angle" },
                { vi: "Ngang ƒê·∫ßu G·ªëi", en: "Knee Level", desc: "Camera at knee height, low angle emphasizing height" },
                { vi: "S√°t M·∫∑t ƒê·∫•t", en: "Ground Level", desc: "Camera placed on or near ground surface, dramatic low perspective" }
            ],
            shots: [
                { vi: "C·ª±c C·∫≠n", en: "Extreme Close Up", desc: "Extremely tight shot showing only a small detail like eyes or lips" },
                { vi: "C·∫≠n C·∫£nh", en: "Close Up", desc: "Tight shot of face or object filling the frame with detail" },
                { vi: "Trung C·∫≠n", en: "Medium Close Up", desc: "Shot from chest up, showing face and upper body" },
                { vi: "Trung C·∫£nh", en: "Medium Shot", desc: "Shot from waist up, balance of subject and environment" },
                { vi: "C·∫£nh Cao B·ªìi", en: "Cowboy Shot", desc: "Shot from mid-thigh up, showing holster area, western style" },
                { vi: "To√†n C·∫£nh", en: "Full Shot", desc: "Full body visible from head to toe in frame" },
                { vi: "G√≥c R·ªông", en: "Wide Shot", desc: "Subject with significant environment visible around them" },
                { vi: "G√≥c C·ª±c R·ªông", en: "Extreme Wide Shot", desc: "Very wide establishing shot, subject small in vast environment" }
            ],
            composition: [
                { vi: "Quy T·∫Øc M·ªôt Ph·∫ßn Ba", en: "Rule of Thirds", desc: "Subject placed at intersection of grid dividing frame into thirds" },
                { vi: "T·ª∑ L·ªá V√†ng", en: "Golden Ratio", desc: "Composition following 1.618 spiral ratio for natural visual flow" },
                { vi: "ƒê∆∞·ªùng D·∫´n", en: "Leading Lines", desc: "Lines in image guide viewer's eye toward subject" },
                { vi: "ƒê∆∞·ªùng H·ªôi T·ª•", en: "Converging Lines", desc: "Multiple lines meeting at vanishing point creating depth" },
                { vi: "ƒê∆∞·ªùng Cong Ch·ªØ S", en: "S-Curve", desc: "Curved S-shaped line flowing through composition" },
                { vi: "B·ªë C·ª•c Trung T√¢m", en: "Center Composition", desc: "Subject placed directly in center of frame for emphasis" },
                { vi: "ƒê·ªëi X·ª©ng", en: "Symmetry", desc: "Mirror-like balance on both sides of frame" },
                { vi: "C√¢n B·∫±ng B·∫•t ƒê·ªëi X·ª©ng", en: "Asymmetrical Balance", desc: "Visual balance achieved through different sized elements" },
                { vi: "Khung Trong Khung", en: "Frame Within Frame", desc: "Natural frame like doorway or window around subject" },
                { vi: "Ph√¢n L·ªõp", en: "Layering", desc: "Multiple depth layers creating dimensional composition" },
                { vi: "L·∫•p ƒê·∫ßy Khung H√¨nh", en: "Fill The Frame", desc: "Subject fills entire frame with minimal background" },
                { vi: "Kh√¥ng Gian √Çm", en: "Negative Space", desc: "Large empty areas around subject for emphasis" },
                { vi: "T·ªëi Gi·∫£n", en: "Minimalism", desc: "Simple composition with few elements, clean aesthetic" },
                { vi: "H·ªça Ti·∫øt L·∫∑p L·∫°i", en: "Pattern & Repetition", desc: "Repeating elements creating rhythm and visual interest" },
                { vi: "Ph√° V·ª° H·ªça Ti·∫øt", en: "Breaking The Pattern", desc: "One element disrupting pattern for focal point" },
                { vi: "B·ªë C·ª•c Tam Gi√°c", en: "Triangle Composition", desc: "Elements arranged in triangular shape for stability" },
                { vi: "S·ª± ƒê·ªëi L·∫≠p", en: "Juxtaposition", desc: "Contrasting elements placed together for impact" },
                { vi: "Ph·∫£n Chi·∫øu", en: "Reflection", desc: "Mirror reflections on water or glass surfaces" }
            ],
            effects: [
                { vi: "L√†m T·ªëi G√≥c", en: "Vignette", desc: "Darkened edges drawing attention to center of frame" },
                { vi: "M·ªù Chuy·ªÉn ƒê·ªông", en: "Motion Blur", desc: "Blur effect from movement creating speed sensation" },
                { vi: "L√≥e S√°ng", en: "Lens Flare", desc: "Light streaks and artifacts from bright light source" },
                { vi: "Chuy·ªÉn N√©t", en: "Rack Focus", desc: "Focus shifting between foreground and background" },
                { vi: "Hi·ªáu ·ª®ng M√¥ H√¨nh", en: "Tilt Shift", desc: "Effect making real scenes look like miniature models" },
                { vi: "ƒê·ªô S√¢u M·ªèng (Bokeh)", en: "Shallow DOF Bokeh", desc: "Blurred background with beautiful out-of-focus circles" },
                { vi: "ƒê·ªô S√¢u D√†y", en: "Deep Focus", desc: "Everything in frame from near to far in sharp focus" }
            ],
            lighting: [
                { vi: "Ng∆∞·ª£c S√°ng", en: "Silhouette", desc: "Subject backlit appearing as dark shape against bright background" },
                { vi: "T∆∞∆°ng Ph·∫£n ƒê·∫≠m", en: "Chiaroscuro", desc: "Dramatic contrast between deep shadows and bright highlights" },
                { vi: "T∆∞∆°ng Ph·∫£n Cao", en: "High Contrast", desc: "Strong difference between light and dark areas" },
                { vi: "√Ånh S√°ng Chia ƒê√¥i", en: "Split Lighting", desc: "Half face lit, half in shadow, dramatic portrait lighting" },
                { vi: "√Ånh S√°ng Ng∆∞·ª£c", en: "Backlighting", desc: "Main light behind subject creating rim and glow" },
                { vi: "√Ånh S√°ng Vi·ªÅn", en: "Rim Lighting", desc: "Light outlining edges of subject from behind" },
                { vi: "√Ånh S√°ng T·ª´ Tr√™n", en: "Top Light", desc: "Light source directly above creating dramatic shadows" },
                { vi: "√Ånh S√°ng C·ª©ng", en: "Hard Light", desc: "Direct harsh light creating sharp defined shadows" },
                { vi: "√Ånh S√°ng M·ªÅm", en: "Soft Light", desc: "Diffused gentle light with soft gradual shadows" },
                { vi: "Gi·ªù V√†ng", en: "Golden Hour", desc: "Warm golden sunlight during sunrise or sunset" },
                { vi: "Gi·ªù Xanh", en: "Blue Hour", desc: "Cool blue ambient light just before sunrise or after sunset" }
            ],
            colors: [
                { vi: "ƒê∆°n S·∫Øc", en: "Monochromatic", desc: "Single color palette with varying shades and tones" },
                { vi: "M·∫£ng M√†u", en: "Color Blocking", desc: "Large areas of solid contrasting colors" },
                { vi: "M√†u B·ªï T√∫c", en: "Complementary Colors", desc: "Opposite colors on color wheel creating vibrant contrast" }
            ]
        };

        const QUALITY_KEYWORDS = [
            { vi: "8K UHD", en: "8K UHD", prompt: "8K UHD, ultra high definition" },
            { vi: "RAW", en: "RAW Photo", prompt: "RAW photo, unprocessed, maximum detail" },
            { vi: "Si√™u Chi Ti·∫øt", en: "Hyperdetailed", prompt: "hyperdetailed, intricate details, sharp focus" },
            { vi: "Chuy√™n Nghi·ªáp", en: "Professional", prompt: "professional photography, studio quality" },
            { vi: "ƒêi·ªán ·∫¢nh", en: "Cinematic", prompt: "cinematic, movie still, film grain" },
            { vi: "DSLR", en: "DSLR Quality", prompt: "shot on DSLR, high quality sensor" },
            { vi: "Hasselblad", en: "Hasselblad", prompt: "shot on Hasselblad, medium format" },
            { vi: "√Ånh S√°ng Ho√†n H·∫£o", en: "Perfect Lighting", prompt: "perfect lighting, well-lit, balanced exposure" }
        ];

        const MOODS = [
            { vi: "H√†ng ng√†y", en: "Daily", emoji: "‚òÄÔ∏è", id: "daily" },
            { vi: "Du l·ªãch", en: "Travel", emoji: "‚úàÔ∏è", id: "travel" },
            { vi: "·∫®m th·ª±c", en: "Food", emoji: "üçú", id: "food" },
            { vi: "T√¨nh y√™u", en: "Love", emoji: "üíï", id: "love" },
            { vi: "ƒê·ªông l·ª±c", en: "Motivation", emoji: "üí™", id: "motivation" },
            { vi: "H√†i h∆∞·ªõc", en: "Funny", emoji: "üòÇ", id: "funny" },
            { vi: "Aesthetic", en: "Aesthetic", emoji: "üå∏", id: "aesthetic" },
            { vi: "S√¢u l·∫Øng", en: "Deep", emoji: "üåô", id: "deep" }
        ];

        const STYLES = [
            { vi: "D·ªÖ th∆∞∆°ng ü•∞", en: "Cute ü•∞", id: "cute" },
            { vi: "Cool ng·∫ßu üòé", en: "Cool üòé", id: "cool" },
            { vi: "Th∆° m·ªông üåø", en: "Poetic üåø", id: "poetic" },
            { vi: "Gen Z üî•", en: "Gen Z üî•", id: "genz" }
        ];

        const CAPTIONS = {
            daily: {
                cute: ["‚ú® M·ªôt ng√†y m·ªõi, m·ªôt ni·ªÅm vui m·ªõi n√®! üå∏", "‚òÄÔ∏è H√¥m nay tr·ªùi ƒë·∫πp qu√°, l√≤ng c≈©ng ƒë·∫πp theo üíï", "üí´ C·ª© c∆∞·ªùi th√¥i, m·ªçi th·ª© r·ªìi s·∫Ω ·ªïn üòä", "üçÄ May m·∫Øn ƒë∆∞·ª£c th·ª©c d·∫≠y m·ªói ng√†y üíñ"],
                cool: ["üòé S·ªëng nh∆∞ m√¨nh mu·ªën, kh√¥ng gi·∫£i th√≠ch üî•", "üí™ Ng√†y m·ªõi - Th·ª≠ th√°ch m·ªõi üèÜ", "‚ö° Kh√¥ng g√¨ l√† kh√¥ng th·ªÉ üíØ"],
                poetic: ["üåø Ng√†y qua ng√†y, l·∫∑ng l·∫Ω tr√¥i nh∆∞ d√≤ng n∆∞·ªõc üçÉ", "üå∏ M·ªói kho·∫£nh kh·∫Øc l√† m√≥n qu√† üí´"],
                genz: ["üíÖ Slay c·∫£ ng√†y kh√¥ng ngh·ªâ bestie üî•", "üò≠üíÖ Vibe check: ƒëang ·ªïn 100 ƒëi·ªÉm üíØ", "ü´∂ Real qu√° real, kh√¥ng cap üó£Ô∏è"]
            },
            travel: {
                cute: ["‚úàÔ∏è ƒêi ƒë√¢u c≈©ng ƒë∆∞·ª£c, mi·ªÖn b√™n b·∫°n üíï", "üèñÔ∏è Bi·ªÉn xanh c√°t tr·∫Øng n·∫Øng v√†ng üå¥", "üéí X√°ch ba l√¥ l√™n v√† ƒëi! ü•∞"],
                cool: ["üåç Collect moments, not things üì∏", "‚õ∞Ô∏è ƒê·ªânh cao n√†o c≈©ng chinh ph·ª•c üî•"],
                poetic: ["üåÖ N∆°i ch√¢n tr·ªùi g·∫∑p bi·ªÉn, tim an y√™n üåä", "üèîÔ∏è N√∫i cao ch·∫≥ng ng·∫°i, ƒë∆∞·ªùng d√†i ch·∫≥ng s·ª£ üçÉ"],
                genz: ["üß≥ Workation c√°c c·ª• ∆°i üíª‚òÄÔ∏è", "üìç Check-in ƒë·ªãa ƒëi·ªÉm hot üî•"]
            },
            food: {
                cute: ["üçú ƒÇn no m·ªõi c√≥ s·ª©c y√™u ƒë·ªùi üòãüíï", "üßÅ Ng·ªçt nh∆∞ cupcake, ƒë√°ng y√™u nh∆∞ m√¨nh ü•∞"],
                cool: ["üçî Foodie life is the best life üî•", "üç£ Sushi time = Happy time üòé"],
                poetic: ["‚òï C√† ph√™ bu·ªïi s√°ng, thanh th·∫£n c·∫£ ng√†y üåø"],
                genz: ["üçú Trust me bro ngon l·∫Øm üî•", "üßã Tr√† s·ªØa 3 ly/ng√†y, broke nh∆∞ng worth üíÖ"]
            },
            love: {
                cute: ["üíï C√≥ ng∆∞·ªùi ƒë·ªÉ th∆∞∆°ng l√† h·∫°nh ph√∫c ü•∞", "üíë B√™n nhau l√† ƒë·ªß üå∏"],
                cool: ["üñ§ You and me against the world üî•", "üíç Partners in crime üòé"],
                poetic: ["üåô Em l√† √°nh trƒÉng soi ƒë√™m d√†i üí´", "üå∏ Y√™u l√† ƒë·ªÉ hoa n·ªü trong l√≤ng üå∑"],
                genz: ["üíÖ ƒê√£ c√≥ b·ªì, ƒë·ª´ng th·∫£ th√≠nh üôÖ‚Äç‚ôÄÔ∏è", "ü´∂ My person ƒë√¢y r·ªìi üîí"]
            },
            motivation: {
                cute: ["üå∏ C·ªë l√™n, m·ªçi th·ª© s·∫Ω t·ªët ƒë·∫πp! üí™üíï", "‚ú® B·∫°n gi·ªèi h∆°n b·∫°n nghƒ© ü•∞"],
                cool: ["üî• The only limit is you. Break it! üí™", "‚ö° Champions are made when no one watches üèÜ"],
                poetic: ["üåÖ M·ªói b√¨nh minh l√† kh·ªüi ƒë·∫ßu m·ªõi üå∏", "ü¶Ö Bay cao ƒë·ªÉ th·∫•y th·∫ø gi·ªõi r·ªông üí´"],
                genz: ["üí™ Grind kh√¥ng ngh·ªâ, th√†nh c√¥ng t·ª± ƒë·∫øn üìà", "üî• Haters gonna hate, winners gonna win üòé"]
            },
            funny: {
                cute: ["ü§™ M·∫∑t cute nh∆∞ng l∆∞·ªùi v√¥ ƒë·ªëi üòÇüíï", "üòÖ NƒÉng nh√¥ng ƒë·ªông nh√¥ng l√† m√¨nh üå∏"],
                cool: ["üòé Ng∆∞·ªùi ta g·ªçi tui l√†... c≈©ng h√¥ng ai g·ªçi ü§∑", "üôÉ Not lazy, energy saving mode üîã"],
                poetic: ["üåô ƒê√™m suy nghƒ© v·ªÅ ƒë·ªùi... ch·ªß y·∫øu nghƒ© ƒÉn g√¨ üçú"],
                genz: ["üíÄ I ·ªët ƒë√¢y, ƒë·ªùi c√≥ g√¨ ƒë√°ng t·ªânh üòµ‚Äçüí´", "ü§° Xu n√†o c≈©ng v·∫≠y, ngh√®o nh·∫•t ƒë·ªãnh üí∏"]
            },
            aesthetic: {
                cute: ["üå∏ Dreamy vibes only üí≠üíï", "ü¶ã Soft and sweet like cotton candy ‚òÅÔ∏è"],
                cool: ["üñ§ Dark aesthetic, bright soul ‚ú®", "üåô Midnight thoughts, golden dreams üí´"],
                poetic: ["üåø Gi·ªØa ·ªìn √†o, t√¨m g√≥c b√¨nh y√™n üå∏", "üåô ƒê√™m tƒ©nh l·∫∑ng, h·ªìn t·ª± do ‚ú®"],
                genz: ["‚ú® Vibes immaculate, energy unmatched üíÖ", "üåô Dark academia but Vietnamese üìö"]
            },
            deep: {
                cute: ["üåô ƒê√™m suy nghƒ© nhi·ªÅu, nh∆∞ng v·∫´n y√™u ƒë·ªùi üíï", "‚ú® Ch·∫•p nh·∫≠n b·∫£n th√¢n l√† b∆∞·ªõc ƒë·∫ßu h·∫°nh ph√∫c üíñ"],
                cool: ["üñ§ Pain made me, won't break me üí™", "üåô Silence speaks louder üî•"],
                poetic: ["üåô Trong ƒë√™m t·ªëi, v·∫´n th·∫•y √°nh sao ‚ú®", "üåä S√≥ng d·ªØ d·ªôi hay √™m ƒë·ªÅm, nh∆∞ ƒë·ªùi üåÖ"],
                genz: ["üíÄ Overthinking at 3am again üåô", "ü´† Healing era c√≥ l√∫c breakdown üò≠"]
            }
        };

        // State
        let lang = 'vi';
        let isDark = false;
        let currentImage = null;
        let selectedTech = { angles: null, shots: null, composition: null, effects: null, lighting: null, colors: null };
        let selectedQuality = [];
        let selectedMood = 'daily';
        let selectedStyle = 'cute';
        let savedPrompts = JSON.parse(localStorage.getItem('savedPrompts') || '[]');

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderTechGrids();
            renderQualityChips();
            renderMoodGrid();
            renderStyleChips();
            renderSavedPrompts();
            setupEventListeners();
        });

        function renderTechGrids() {
            renderTechGrid('anglesGrid', TECHNIQUES.angles, 'angles');
            renderTechGrid('shotsGrid', TECHNIQUES.shots, 'shots');
            renderTechGrid('compositionGrid', TECHNIQUES.composition, 'composition');
            renderTechGrid('effectsGrid', TECHNIQUES.effects, 'effects');
            renderTechGrid('lightingGrid', TECHNIQUES.lighting, 'lighting');
            renderTechGrid('colorsGrid', TECHNIQUES.colors, 'colors');
        }

        function renderTechGrid(containerId, items, category) {
            const container = document.getElementById(containerId);
            container.innerHTML = items.map((item, i) => `
        <button class="neu-btn tech-btn" data-category="${category}" data-index="${i}">
            <span data-vi="${item.vi}" data-en="${item.en}">${item.vi}</span>
        </button>
    `).join('');
        }

        function renderQualityChips() {
            document.getElementById('qualityChips').innerHTML = QUALITY_KEYWORDS.map((q, i) => `
        <button class="neu-btn opt-chip" data-quality="${i}">
            <span data-vi="${q.vi}" data-en="${q.en}">${q.vi}</span>
        </button>
    `).join('');
        }

        function renderMoodGrid() {
            document.getElementById('moodGrid').innerHTML = MOODS.map(m => `
        <button class="neu-btn caption-opt ${m.id === selectedMood ? 'active' : ''}" data-mood="${m.id}">
            <span class="emoji">${m.emoji}</span>
            <span data-vi="${m.vi}" data-en="${m.en}">${m.vi}</span>
        </button>
    `).join('');
        }

        function renderStyleChips() {
            document.getElementById('styleChips').innerHTML = STYLES.map(s => `
        <button class="neu-btn opt-chip ${s.id === selectedStyle ? 'active' : ''}" data-style="${s.id}">
            <span data-vi="${s.vi}" data-en="${s.en}">${s.vi}</span>
        </button>
    `).join('');
        }

        function renderSavedPrompts() {
            const container = document.getElementById('savedPrompts');
            if (savedPrompts.length === 0) {
                container.innerHTML = `<div class="empty-state neu-inset">
            <span class="material-icons-round">bookmark_border</span>
            <p data-vi="Ch∆∞a c√≥ prompt n√†o ƒë∆∞·ª£c l∆∞u" data-en="No saved prompts yet">Ch∆∞a c√≥ prompt n√†o ƒë∆∞·ª£c l∆∞u</p>
        </div>`;
            } else {
                container.innerHTML = savedPrompts.map((p, i) => `
            <div class="learned-item neu">
                <div class="learned-text">${p}</div>
                <div class="learned-actions">
                    <button class="neu-btn small-btn" onclick="copyText('${p.replace(/'/g, "\\'")}')">üìã</button>
                    <button class="neu-btn small-btn" onclick="deletePrompt(${i})">üóëÔ∏è</button>
                </div>
            </div>
        `).join('');
            }
            updateLang();
        }

        function setupEventListeners() {
            // Tabs
            document.querySelectorAll('.main-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab + 'Tab').classList.add('active');
                });
            });

            // Theme & Lang
            document.getElementById('themeBtn').addEventListener('click', () => {
                isDark = !isDark;
                document.body.classList.toggle('dark', isDark);
                document.getElementById('themeBtn').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            });

            document.getElementById('langBtn').addEventListener('click', () => {
                lang = lang === 'vi' ? 'en' : 'vi';
                document.getElementById('langBtn').textContent = lang === 'vi' ? 'üáªüá≥' : 'üá¨üáß';
                updateLang();
            });

            // Upload
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');

            uploadArea.addEventListener('click', e => {
                if (e.target.id !== 'changeBtn') fileInput.click();
            });
            document.getElementById('changeBtn').addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', e => e.target.files[0] && handleFile(e.target.files[0]));
            uploadArea.addEventListener('dragover', e => { e.preventDefault(); uploadArea.style.transform = 'scale(1.02)'; });
            uploadArea.addEventListener('dragleave', () => uploadArea.style.transform = '');
            uploadArea.addEventListener('drop', e => {
                e.preventDefault();
                uploadArea.style.transform = '';
                e.dataTransfer.files[0]?.type.startsWith('image/') && handleFile(e.dataTransfer.files[0]);
            });

            // Tech buttons
            document.addEventListener('click', e => {
                if (e.target.closest('.tech-btn')) {
                    const btn = e.target.closest('.tech-btn');
                    const cat = btn.dataset.category;
                    document.querySelectorAll(`.tech-btn[data-category="${cat}"]`).forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    selectedTech[cat] = parseInt(btn.dataset.index);
                }
            });

            // Quality chips
            document.getElementById('qualityChips').addEventListener('click', e => {
                const chip = e.target.closest('.opt-chip');
                if (chip) {
                    chip.classList.toggle('active');
                    const idx = parseInt(chip.dataset.quality);
                    if (selectedQuality.includes(idx)) {
                        selectedQuality = selectedQuality.filter(i => i !== idx);
                    } else {
                        selectedQuality.push(idx);
                    }
                }
            });

            // Mood & Style
            document.getElementById('moodGrid').addEventListener('click', e => {
                const opt = e.target.closest('.caption-opt');
                if (opt) {
                    document.querySelectorAll('.caption-opt').forEach(o => o.classList.remove('active'));
                    opt.classList.add('active');
                    selectedMood = opt.dataset.mood;
                }
            });

            document.getElementById('styleChips').addEventListener('click', e => {
                const chip = e.target.closest('.opt-chip');
                if (chip && chip.dataset.style) {
                    document.querySelectorAll('#styleChips .opt-chip').forEach(c => c.classList.remove('active'));
                    chip.classList.add('active');
                    selectedStyle = chip.dataset.style;
                }
            });

            // Generate buttons
            document.getElementById('genPromptBtn').addEventListener('click', generatePrompt);
            document.getElementById('genCaptionBtn').addEventListener('click', generateCaption);
            document.getElementById('analyzeBtn').addEventListener('click', analyzeImage);
        }

        function handleFile(file) {
            currentImage = file;
            const reader = new FileReader();
            reader.onload = e => {
                const img = new Image();
                img.onload = () => {
                    document.getElementById('previewImage').src = e.target.result;
                    document.getElementById('imageInfo').innerHTML = `
                <span class="info-badge">${img.width}√ó${img.height}</span>
                <span class="info-badge">${(file.size / 1024).toFixed(0)}KB</span>
            `;
                    document.getElementById('uploadContent').style.display = 'none';
                    document.getElementById('previewContainer').classList.add('show');
                    document.getElementById('uploadArea').classList.add('has-image');
                    document.getElementById('genPromptBtn').disabled = false;
                    document.getElementById('genCaptionBtn').disabled = false;
                    document.getElementById('analyzeBtn').disabled = false;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function toggleCategory(header) {
            header.closest('.category').classList.toggle('open');
        }

        function updateLang() {
            document.querySelectorAll('[data-vi]').forEach(el => {
                el.textContent = lang === 'vi' ? el.dataset.vi : el.dataset.en;
            });
        }

        async function generatePrompt() {
            const loading = document.getElementById('promptLoading');
            const results = document.getElementById('promptResults');
            loading.classList.add('show');
            results.classList.remove('show');

            await new Promise(r => setTimeout(r, 1000));

            let promptParts = [];
            let promptPartsVi = [];

            // Add selected techniques
            Object.entries(selectedTech).forEach(([cat, idx]) => {
                if (idx !== null) {
                    const tech = TECHNIQUES[cat][idx];
                    promptParts.push(`${tech.en}: ${tech.desc}`);
                    promptPartsVi.push(tech.vi);
                }
            });

            // Add quality keywords
            selectedQuality.forEach(idx => {
                promptParts.push(QUALITY_KEYWORDS[idx].prompt);
                promptPartsVi.push(QUALITY_KEYWORDS[idx].vi);
            });

            const finalPromptEn = promptParts.length > 0 ? promptParts.join(', ') : 'Professional photography, high quality, sharp focus, perfect lighting';
            const finalPromptVi = promptPartsVi.length > 0 ? promptPartsVi.join(', ') : '·∫¢nh chuy√™n nghi·ªáp, ch·∫•t l∆∞·ª£ng cao';

            results.innerHTML = `
        <div class="result-card neu">
            <div class="result-header">
                <span class="result-label">üá¨üáß English Prompt</span>
                <button class="neu-btn copy-btn" onclick="copyText(this.parentElement.nextElementSibling.textContent, this)">üìã Copy</button>
            </div>
            <div class="result-text neu-inset">${finalPromptEn}</div>
        </div>
        <div class="result-card neu">
            <div class="result-header">
                <span class="result-label">üáªüá≥ Prompt Ti·∫øng Vi·ªát</span>
                <button class="neu-btn copy-btn" onclick="copyText(this.parentElement.nextElementSibling.textContent, this)">üìã Copy</button>
            </div>
            <div class="result-text neu-inset">${finalPromptVi}</div>
        </div>
    `;

            loading.classList.remove('show');
            results.classList.add('show');
        }

        async function generateCaption() {
            const loading = document.getElementById('captionLoading');
            const results = document.getElementById('captionResults');
            loading.classList.add('show');
            results.classList.remove('show');

            await new Promise(r => setTimeout(r, 800));

            const captions = CAPTIONS[selectedMood]?.[selectedStyle] || CAPTIONS.daily.cute;
            const shuffled = [...captions].sort(() => Math.random() - 0.5).slice(0, 3);

            results.innerHTML = shuffled.map((cap, i) => `
        <div class="result-card neu">
            <div class="result-header">
                <span class="result-label">üí¨ Caption ${i + 1}</span>
                <button class="neu-btn copy-btn" onclick="copyText('${cap.replace(/'/g, "\\'")}', this)">üìã Copy</button>
            </div>
            <div class="result-text caption neu-inset">${cap}</div>
        </div>
    `).join('');

            loading.classList.remove('show');
            results.classList.add('show');
        }

        async function analyzeImage() {
            const loading = document.getElementById('learnLoading');
            const results = document.getElementById('learnResults');
            loading.classList.add('show');
            results.classList.remove('show');

            await new Promise(r => setTimeout(r, 1500));

            // Simulated analysis
            const randomTechs = [
                TECHNIQUES.angles[Math.floor(Math.random() * TECHNIQUES.angles.length)],
                TECHNIQUES.shots[Math.floor(Math.random() * TECHNIQUES.shots.length)],
                TECHNIQUES.composition[Math.floor(Math.random() * TECHNIQUES.composition.length)],
                TECHNIQUES.lighting[Math.floor(Math.random() * TECHNIQUES.lighting.length)]
            ];

            const analyzedPrompt = randomTechs.map(t => `${t.en}: ${t.desc}`).join(', ') + ', professional photography, high quality';
            const analyzedPromptVi = randomTechs.map(t => t.vi).join(', ') + ', ·∫£nh chuy√™n nghi·ªáp';

            results.innerHTML = `
        <div class="result-card neu">
            <div class="result-header">
                <span class="result-label">üîç ${lang === 'vi' ? 'Prompt ph√¢n t√≠ch ƒë∆∞·ª£c' : 'Analyzed Prompt'}</span>
                <button class="neu-btn copy-btn" onclick="savePrompt('${analyzedPrompt.replace(/'/g, "\\'")}')">üíæ ${lang === 'vi' ? 'L∆∞u' : 'Save'}</button>
            </div>
            <div class="result-text neu-inset">${analyzedPrompt}</div>
        </div>
        <div class="result-card neu">
            <div class="result-header">
                <span class="result-label">üáªüá≥ Ti·∫øng Vi·ªát</span>
                <button class="neu-btn copy-btn" onclick="copyText('${analyzedPromptVi.replace(/'/g, "\\'")}', this)">üìã Copy</button>
            </div>
            <div class="result-text neu-inset">${analyzedPromptVi}</div>
        </div>
    `;

            loading.classList.remove('show');
            results.classList.add('show');
        }

        function copyText(text, btn) {
            navigator.clipboard.writeText(text).then(() => {
                if (btn) {
                    btn.classList.add('copied');
                    btn.innerHTML = '‚úÖ ' + (lang === 'vi' ? 'ƒê√£ copy!' : 'Copied!');
                    setTimeout(() => {
                        btn.classList.remove('copied');
                        btn.innerHTML = 'üìã Copy';
                    }, 2000);
                }
            });
        }

        function savePrompt(prompt) {
            if (!savedPrompts.includes(prompt)) {
                savedPrompts.push(prompt);
                localStorage.setItem('savedPrompts', JSON.stringify(savedPrompts));
                renderSavedPrompts();
            }
        }

        function deletePrompt(index) {
            savedPrompts.splice(index, 1);
            localStorage.setItem('savedPrompts', JSON.stringify(savedPrompts));
            renderSavedPrompts();
        }
    </script>
</body>

</html>